\documentclass[titlepage, a4paper, 12pt]{article}
\usepackage[swedish]{babel}
\usepackage[utf8]{inputenc}
\usepackage{verbatim}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{parskip}

% SourceCode
\usepackage{listings}
\usepackage{color}

% Include pdf with multiple pages ex \includepdf[pages=-, nup=2x2]{filename.pdf}
\usepackage[final]{pdfpages}
% Place figures where they should be
\usepackage{float}

% SourceCode
\definecolor{keywordcolor}{rgb}{0.5,0,0.75}
\lstset{
  inputencoding=utf8,
  language=Java,
  extendedchars=true,
  basicstyle=\scriptsize\ttfamily,
  stringstyle=\color{blue},
  commentstyle=\color{red},
  numbers=left,
  firstnumber=auto,
  numberblanklines=true,
  stepnumber=1,
  showstringspaces=false,
  keywordstyle=\color{keywordcolor}
  % identifierstyle=\color{identifiercolor}
}

% Float for text
\floatstyle{ruled}
\newfloat{kod}{H}{lop}
\floatname{kod}{Kodsnutt}

% vars
\def\title{Genetisk animation; rörelsemönster i 2D mha neuralt nät och genetisk algoritm}
\def\preTitle{Projekt}
\def\kurs{Emergenta system, 5DV017}

\def\namn{Andreas Jakobsson}
\def\mail{dit06ajs@cs.umu.se}

\def\namnTva{Anton Johansson}
\def\mailTva{dit06ajn@cs.umu.se}

\def\namnTre{Erik Rönnberg}
\def\mailTre{dit06erg@cs.umu.se}

\def\namnFyra{Ludvig Widman}
\def\mailFyra{dit06lwn@cs.umu.se}

\def\namnFem{Ragnar Asplund}
\def\mailFem{dit04rad@cs.umu.se}

\def\pathtocode{$\sim$dit06ajn/edu/emergenta-system/projektet/src}

\def\handledareEtt{Jonny Pettersson, jonny@cs.umu.se}
\def\handledareTva{Anders Broberg, bopspe@cs.umu.se}

\def\inst{datavetenskap}
\def\dokumentTyp{Projektrapport}

\begin{document}
\begin{titlepage}
  \thispagestyle{empty}
  \begin{small}
    \begin{tabular}{@{}p{\textwidth}@{}}
      UMEÅ UNIVERSITET \hfill \today \\
      Institutionen för \inst \\
      \dokumentTyp \\
    \end{tabular}
  \end{small}
  \vspace{10mm}
  \begin{center}
    \LARGE{\preTitle} \\
    \huge{\textbf{\kurs}} \\
    \vspace{10mm}
    \LARGE{\title} \\
    \vspace{15mm}
    \begin{large}
      \namn, \mail \\
      \namnTva, \mailTva\\
      \namnTre, \mailTre\\
      \namnFyra, \mailFyra\\
      \namnFem, \mailFem\\
      \texttt{\pathtocode}
    \end{large}
    \vfill
    \large{\textbf{Handledare}}\\
    \mbox{\large{\handledareEtt}}
    \mbox{\large{\handledareTva}}
  \end{center}
\end{titlepage}

\newpage
\mbox{}
\vspace{70mm}
\begin{center}
% Dedication goes here
\end{center}
\thispagestyle{empty}
\newpage

\pagestyle{fancy}
\rhead{\today}
\lhead{\footnotesize{\mail, \mailTva\\\mailTre, \mailFyra, \mailFem}}
\chead{}
\lfoot{}
\cfoot{}
\rfoot{}

\begin{abstract}
% TODO: Sammanfattning/abstract

\end{abstract}

\cleardoublepage
\newpage
\tableofcontents
\cleardoublepage

\cfoot{\thepage}
\pagenumbering{arabic}

\section{Introduktion}
% Introduktion till ämnet, inklusive översikt av tidigare studier
% \cite{flake}

\subsection{Karl Sims}
Karl Sims utforskar i Evolvig Virtual Creatures \cite{sims} både hur varelsers form och deras beteenden kan utvecklas med hjälp av genetiska algoritmer (GA). Varelserna har sensorer och effektorer som är kopplade till in och utnoder i ett neuralat nät. 

I sina försök använder Sims en GA för att optimera både struktur och vikter i det neurala nätet. Det nät han använder har i varje nod en av många matematiska funktioner; exempelvis sinus, summa, produkt, max, osv. Sims lät sina försök köra mellan 50 och 100 generationer och optimerade mot olika typer av beteenden som ex gång, simmande och hoppande rörelser. 


\section{Metodbeskrivning}
% Metodbeskrivning. Ska beskrivas så utförligt att läsaren ska kunna
% reproducera ert arbete

\section{Systemöversikt}
	Systemet består av tre stora delar. Den genetiska algoritmen (GA), Hjärnan och Fysiksimuleringen. 

	\subsection{GA}
	

		För selektion används en variant på tournament selection. Två grupper om tre individer väljs slumpmässigt och de med högst fitness ur respektive grupp korsas så två nya varelser med en blandning av deras genotyp skapas. Detta upprepas så en ny population av halva storleken skapas. Därefter väljs fler grupper av tre där de bästa direkt går till den nya populationen oförändrade tills den nya populationen har samma storlek som den gamla. Varje individ i den nya populationen muterar varje del av sin genotyp med en viss sannolikhet. Den nya populationen ersätter därefter den gamla. 
		
		Genotypen i varelsen kodar för vikter i det neurala nät som utgör dess hjärna. För att evaluera fitness för varje individ skapas ett nät med de vikter genotypen anger, detta får sedan under en begränsad tid styra en fast kropp i en fysiksimulering. Fitness beräknas på hur långt kroppen lyckats röra sig.
		

		%Genetisk algoritm
		%Selektionsmetoder
		%	Tournamentselection, 3
		%	Återläggning
		%Genotypen kodar för vikter i nätet
		%Beräknar fitness baserat på data från siumleringen

	\subsection{Hjärnan}
		Hjärnan består av ett hopfield neuralt nät som styr varelsens beteende. Varje nod i det neurala nätet har bågar till och från alla andra noder. Varje båge har en vikt. Vissa noder har även bågar från sensorer i simuleringen. Ur vissa noder hämtas värdet och används som data till effektorer i simuleringen. 

		Vid varje simuleringssteg i hjärnan beräknas ett värde i varje nod. Värdet beräknas som en summa av värdet från varje båge gånger dess vikt. På denna summa appliceras sedan sigmoidfunktionen så värdet hamnar mellan -1 och 1. 

		
		%Neuralt nät
		%Styr varelsen
		%Får sensordata från simuleringen
		%Ger instruktioner till effektorerna

	\subsection{Simulering}
		
		Fysiksimuleringen använder biblioteket phys2d för själva fysiken. I simuleringen har ett markplan skapats och på detta en varelse. 

		Varelsen består av en mask med 5 leder. Varje led kan röra sig 180 grader. 

		%Phys2d
		%En varelse
		%	Mask
		%	Leder med begränsade maxvinklar
		%	En sensor i varje led
		%Varelsen rör sig på en yta
		%Eventuellt hinder

\section{Resultat}
% Resultat innehållande sammanställning/analys av tester
\section{Diskussion}
% Diskussion av resultatet, koppling till tidigare studier

\bibliographystyle{alpha}
\bibliography{books}

\newpage
\appendix
\pagenumbering{roman}
\section{Källkod}\label{sec:kallkod}
Härefter följer utskrifter från källkoden och andra filer som hör till
denna laboration.

\subsection{Flocking.nlogo}\label{app:Flocking.nlogo}
\begin{footnotesize}
  \verbatiminput{../src/Flocking.nlogo}
\end{footnotesize}
\end{document}
